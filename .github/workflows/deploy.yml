name: Deploy

on:
  push:
    branches: [ main ]
    paths:
      - 'frontend/**'
      - 'backend/**'

jobs:
  deploy:
    runs-on: ubuntu-latest
    needs: [test-backend, test-frontend]
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy Backend
      run: |
        echo "Deploying backend..."
        # Aquí irían los comandos para desplegar el backend
        # Por ejemplo, usando SSH para conectar al servidor
        # o usando un servicio como Heroku, AWS, etc.
    
    - name: Deploy Frontend
      run: |
        echo "Deploying frontend..."
        # Aquí irían los comandos para desplegar el frontend
        # Por ejemplo, usando Netlify, Vercel, o un servidor estático

  test-backend:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Test Backend
      run: |
        cd backend
        npm ci
        npm test

  test-frontend:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Test Frontend
      run: |
        cd frontend/sdn-staff
        npm ci
        npm test 